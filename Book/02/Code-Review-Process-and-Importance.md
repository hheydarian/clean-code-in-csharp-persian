# 2
# بازبینی کد – فرآیند و اهمیت (Code Review – Process and Importance)
انگیزه اصلی پشت هر بازبینی کد (code review)، بهبود کیفیت کلی کد است. کیفیت کد (Code quality) بسیار مهم است. این تقریباً ناگفته پیداست، به خصوص اگر کد شما بخشی از یک پروژه تیمی باشد یا برای دیگران، مانند توسعه‌دهندگان متن‌باز (open source developers) و مشتریان از طریق توافق‌نامه‌های امانی (escrow agreements)، قابل دسترسی باشد.

اگر هر توسعه‌دهنده‌ای آزاد بود تا هر طور که می‌خواهد کدنویسی کند، در نهایت با یک نوع کد مواجه می‌شدید که به روش‌های بسیار متفاوتی نوشته شده بود، و نهایتاً کد به یک آشفته‌بازار غیرقابل کنترل (unwieldy mess) تبدیل می‌شد. به همین دلیل مهم است که یک سیاست استانداردهای کدنویسی (coding standards policy) داشته باشیم که شیوه‌های کدنویسی شرکت و رویه بازبینی کد (code review procedures) را که باید رعایت شوند، تشریح کند.

هنگامی که بازبینی کد انجام می‌شود، همکاران کد یکدیگر را بازبینی خواهند کرد. همکاران درک خواهند کرد که اشتباه کردن فقط یک ویژگی انسانی است. آن‌ها کد را برای یافتن اشتباهات، کدنویسی‌ای که قوانین رفتار کدنویسی شرکت (company's code of coding conduct) را نقض می‌کند، و هر کدی که، در حالی که از نظر نحوی صحیح (syntactically correct) است، می‌تواند بهبود یابد تا یا خواناتر (more readable)، یا قابل نگهداری‌تر (more maintainable)، یا کارآمدتر (more performant) شود، بررسی خواهند کرد.


بنابراین، در این فصل، موضوعات زیر را برای درک جزئیات فرآیند بازبینی کد پوشش خواهیم داد:

+ آماده‌سازی کد برای بازبینی

+ رهبری یک بازبینی کد

+ دانستن اینکه چه چیزی را بازبینی کنیم

+ دانستن اینکه چه زمانی کد را برای بازبینی بفرستیم

+ ارائه و پاسخ به بازخورد بازبینی

لطفاً توجه داشته باشید که برای بخش‌های آماده‌سازی کد برای بازبینی و دانستن اینکه چه زمانی کد را برای بازبینی بفرستیم، از دیدگاه برنامه‌نویس (programmer) صحبت خواهیم کرد. برای بخش‌های رهبری یک بازبینی کد و دانستن اینکه چه چیزی را بازبینی کنیم، از دیدگاه بازبینی‌کننده کد (code reviewer) صحبت خواهیم کرد. با این حال، در مورد بخش ارائه و پاسخ به بازخورد بازبینی، دیدگاه‌های هر دو برنامه‌نویس و بازبینی‌کننده کد را پوشش خواهیم داد.

اهداف یادگیری این فصل این است که شما بتوانید کارهای زیر را انجام دهید:

+ بازبینی‌های کد و چرایی مفید بودن آن‌ها را درک کنید.

+ در بازبینی‌های کد شرکت کنید.

+ انتقاد سازنده (constructive criticism) ارائه دهید.

+ به انتقاد سازنده به طور مثبت پاسخ دهید.

قبل از اینکه عمیقاً به این موضوعات بپردازیم، بیایید فرآیند کلی بازبینی کد را درک کنیم.

## فرآیند بازبینی کد (The code review process)
رویه عادی برای انجام یک بازبینی کد این است که مطمئن شوید کد شما کامپایل (compiles) می‌شود و الزامات تعیین شده را برآورده می‌کند. همچنین باید تمام تست‌های واحد (unit tests) و تست‌های سرتاسری (end-to-end tests) را پاس کند. هنگامی که مطمئن شدید که می‌توانید کد خود را با موفقیت کامپایل، تست و اجرا کنید، سپس آن را در شاخه کاری فعلی (current working branch) چک‌این (checked in) می‌کنید. پس از چک‌این، شما یک درخواست کشیدن (pull request) صادر خواهید کرد.

یک بازبینی‌کننده همتا (peer reviewer) سپس کد شما را بازبینی کرده و نظرات و بازخوردها را به اشتراک خواهد گذاشت. اگر کد شما از بازبینی کد عبور کند، بازبینی کد شما تکمیل شده و سپس می‌توانید شاخه کاری خود را در شاخه اصلی (main trunk) ادغام (merge) کنید. در غیر این صورت، بازبینی همتا رد خواهد شد، و از شما خواسته می‌شود که کار خود را بازبینی کرده و مسائلی را که در نظرات ارائه شده توسط بازبینی‌کننده شما مطرح شده‌اند، برطرف کنید.


دیاگرام زیر فرآیند بازبینی کد همتا را نشان می‌دهد:
<div align="center">
  
  ![Conventions-UsedThis-Book](../../assets/image/02/Table%202-1.png) 
  
</div>
