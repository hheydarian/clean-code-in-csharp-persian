# فصل نهم: طراحی و توسعه API ها 🚀

**واسط‌های برنامه‌نویسی کاربردی (Application Programming Interfaces یا APIها)** در این روزها به‌شدت مهم و حیاتی‌تر از هر زمان دیگری هستند. APIها برای اتصال دولت‌ها و مؤسسات به‌منظور **اشتراک‌گذاری داده‌ها و همکاری در مسائل تجاری و دولتی** استفاده می‌شوند. آن‌ها بین **کلینیک‌های پزشکی و بیمارستان‌ها** برای **اشتراک لحظه‌ای اطلاعات بیماران** به‌کار می‌روند.

شما هر روز بدون اینکه متوجه شوید از APIها استفاده می‌کنید؛ برای مثال، هنگام اتصال به **ایمیل‌ها** یا زمانی که با **همکاران و مشتریان خود** در پلتفرم‌هایی مثل **Microsoft Teams، Microsoft Azure، Amazon Web Services و Google Cloud Platform** همکاری می‌کنید، در حال استفاده از API هستید.

هر بار که با کسی **چت** یا **تماس ویدیویی** برقرار می‌کنید، چه با **کامپیوتر** چه با **تلفن همراه**، در حال استفاده از API هستید. هنگام **پخش زنده کنفرانس‌های ویدیویی**، ورود به **چت پشتیبانی فنی وب‌سایت‌ها** یا **استریم موسیقی و ویدیوهای مورد علاقه‌تان**، همگی نمونه‌هایی از استفاده از API هستند.

بنابراین، به‌عنوان یک **برنامه‌نویس**، ضروری است که به‌خوبی با **مفهوم APIها**، **طراحی، توسعه، امنیت و استقرار آن‌ها** آشنا باشید.

در این فصل، درباره اینکه **API چیست، چه مزایایی دارد و چرا لازم است درباره آن یاد بگیریم** صحبت خواهیم کرد. همچنین موضوعات زیر را بررسی می‌کنیم:

* **API proxies**
* **راهنماهای طراحی و توسعه API**
* **طراحی API با استفاده از RAML**
* **مستندسازی API با Swagger**

---

### موضوعات پوشش داده شده در این فصل: 📚

* **API چیست؟**
* **API proxies**
* **راهنماهای طراحی API**
* **طراحی API با RAML**
* **توسعه و مستندسازی API با Swagger**

---

### مهارت‌هایی که در این فصل به‌دست خواهید آورد: 🛠

* درک مفهوم API و اهمیت یادگیری آن
* شناخت API proxies و دلایل استفاده از آن‌ها
* آشنایی با اصول طراحی در زمان ساخت APIهای خود
* طراحی API با استفاده از RAML
* مستندسازی API با Swagger

در پایان این فصل، شما با **مبانی طراحی خوب API** آشنا خواهید شد و **دانش لازم برای ارتقاء مهارت‌های API** خود را به‌دست می‌آورید. مهم است که ابتدا **درک کنیم API چیست**، بنابراین از همین‌جا شروع می‌کنیم. اما پیش از آن، اطمینان حاصل کنید که **پیش‌نیازهای فنی زیر** را برای بهره‌برداری کامل از این فصل پیاده‌سازی کرده‌اید.

---

### پیش‌نیازهای فنی: 💻

برای ایجاد یک API در این فصل، از فناوری‌های زیر استفاده خواهیم کرد:

* **Visual Studio 2019 Community Edition یا نسخه‌های بالاتر**
* **Swashbuckle.AspNetCore 5 یا بالاتر**
* **Swagger ([https://swagger.io](https://swagger.io))**
* **Atom ([http://atom.io](http://atom.io))**
* **API Workbench by MuleSoft**

---

### API چیست؟ 🤔

APIها **کتابخانه‌های قابل استفاده مجدد** هستند که می‌توانند **بین برنامه‌های مختلف به اشتراک گذاشته شوند** و از طریق **سرویس‌های REST** در دسترس باشند (در این حالت به آن‌ها **RESTful APIs** گفته می‌شود).

**REST (Representational State Transfer)** روشی معماری است که توسط **Roy Fielding** در سال **۲۰۰۰** معرفی شد. REST از **محدودیت‌هایی** تشکیل شده که هنگام ایجاد سرویس‌های REST باید در نظر گرفته شوند. این محدودیت‌ها شامل شش بخش زیر هستند:

1. **Uniform Interface (رابط یکنواخت):**
   برای **شناسایی منابع** و **مدیریت آن‌ها از طریق نمایش** استفاده می‌شود. پیام‌ها **خود توصیف‌گر** هستند و از **Hypermedia** بهره می‌برند. **HATEOAS (Hypermedia as the Engine of Application State)** برای **اطلاعات مربوط به عملیات بعدی قابل انجام توسط کلاینت** به‌کار می‌رود.

2. **Client-Server (کلاینت-سرور):**
   این محدودیت از طریق **پنهان‌سازی اطلاعات (Encapsulation)** عمل می‌کند. فقط **APIهایی که باید توسط کلاینت استفاده شوند قابل مشاهده‌اند** و سایر APIها مخفی می‌مانند. یک **RESTful API** باید **مستقل از بخش‌های دیگر سیستم** باشد و اتصال سست (loosely coupled) داشته باشد.

3. **Stateless (بی‌حالت):**
   APIهای RESTful **هیچ وضعیت یا سابقه‌ای ذخیره نمی‌کنند**. اگر کلاینت به سابقه نیاز داشته باشد، باید **تمام اطلاعات لازم را در هر درخواست ارسال کند**.

4. **Cacheable (قابل کش شدن):**
   منابع باید **قابلیت ذخیره‌سازی موقت (Cache)** داشته باشند. این باعث می‌شود **دسترسی سریع‌تر** و **بار روی سرور کمتر** شود و در نتیجه **سرعت API** بالاتر می‌رود.

5. **Layered System (سیستم لایه‌ای):**
   هر **لایه** باید فقط **یک وظیفه مشخص** داشته باشد. هر مؤلفه تنها باید **از بخش‌هایی که نیاز دارد آگاهی داشته باشد** و نباید از بخش‌های دیگر سیستم مطلع باشد.

6. **Optional Executable Code (کد اجرایی اختیاری):**
   این محدودیت **اختیاری** است و به سرورها اجازه می‌دهد **به‌طور موقت کد اجرایی به کلاینت منتقل کنند** تا قابلیت‌های جدید اضافه یا سفارشی‌سازی شوند.

---

بنابراین هنگام طراحی یک API، باید فرض کنید **کاربر نهایی می‌تواند هر سطحی از تجربه برنامه‌نویسی داشته باشد**. او باید بتواند به‌راحتی **API را دریافت کرده، مستندات آن را مطالعه کند و بلافاصله از آن استفاده کند**.

نگران ایجاد **API کاملاً بی‌نقص** نباشید؛ چراکه APIها به‌مرور **تکامل پیدا می‌کنند**. اگر با APIهای مایکروسافت کار کرده باشید، می‌دانید که آن‌ها **مرتباً به‌روزرسانی می‌شوند**. APIهایی که قرار است در آینده حذف شوند، معمولاً با **Annotation (یادداشت)** مشخص می‌شوند تا به کاربر هشدار دهند **از ویژگی یا متدی خاص استفاده نکند**. در نهایت، وقتی ویژگی‌ها منسوخ شدند، با برچسب **Obsolete** علامت‌گذاری و سپس حذف می‌شوند. این روند به کاربران فرصت می‌دهد **برنامه‌های خود را به‌روز کنند**.

---

### چرا از سرویس‌های REST برای دسترسی به API استفاده کنیم؟ 💡

بسیاری از شرکت‌ها از طریق **ارائه APIهای آنلاین و پولی یا رایگان** سودهای کلانی کسب می‌کنند. **RESTful APIها** می‌توانند یک **دارایی ارزشمند** باشند.

وب‌سایت **Rapid API ([https://rapidapi.com/](https://rapidapi.com/))** مجموعه‌ای از **APIهای رایگان و پولی** را ارائه می‌دهد. APIهای شما می‌توانند به‌صورت **دائمی و مقیاس‌پذیر روی فضای ابری** در دسترس باشند و **یا رایگان یا اشتراکی ارائه شوند**.

مزیت دیگر این است که شما می‌توانید **پیچیدگی‌ها را در پشت‌صحنه پنهان کرده و یک رابط ساده به کاربران ارائه دهید**. همچنین چون **APIها کوچک و قابل کش شدن هستند، بسیار سریع خواهند بود**.

حالا بیایید ببینیم **API Proxy چیست و چرا باید از آن استفاده کنیم**.
