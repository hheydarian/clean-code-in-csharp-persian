# فصل هشتم:  **Threading و Concurrency**

یک **Process (فرآیند)** در اصل همان برنامه‌ای است که روی یک سیستم‌عامل در حال اجرا است. این فرآیند از چندین **Thread (رشته‌ی اجرایی)** ساخته می‌شود.
**Thread of execution (رشته‌ی اجرایی)** مجموعه‌ای از دستورهاست که توسط یک Process صادر می‌شود.

قابلیت اجرای بیش از یک Thread به‌صورت هم‌زمان، **Multi-Threading (چندریسمانی)** نامیده می‌شود.
در این فصل قرار است به موضوع **Multi-Threading** و **Concurrency (هم‌زمانی)** بپردازیم.

هر Thread برای اجرا، یک مقدار مشخصی زمان دریافت می‌کند و این اجرا توسط **Thread Scheduler (زمان‌بند رشته‌ها)** به صورت چرخشی مدیریت می‌شود. زمان‌بند، با استفاده از تکنیکی به نام **Time Slicing** زمان اجرا را بین Threadها تقسیم می‌کند و هر Thread را در زمان تعیین‌شده برای اجرا به CPU می‌فرستد. ⚙️

**Concurrency** یعنی توانایی اجرای بیش از یک Thread دقیقاً در یک لحظه. این موضوع تنها در کامپیوترهایی ممکن است که بیش از یک **Processor Core (هسته پردازنده)** داشته باشند. هرچه تعداد هسته‌ها بیشتر باشد، تعداد بیشتری از Threadها می‌توانند به‌طور هم‌زمان اجرا شوند. 🖥️💡

در طول بررسی **Concurrency** و **Threading** در این فصل، با مشکلاتی مثل **Blocking (انسداد)**، **Deadlock (بن‌بست)** و **Race Condition (شرایط رقابتی)** روبه‌رو می‌شویم. همچنین یاد می‌گیریم چطور با استفاده از اصول **Clean Code** این مشکلات را حل کنیم. ✅

---

### ✨ مباحثی که در این فصل پوشش داده خواهند شد:

1. درک **چرخه حیات Thread**
2. افزودن **پارامتر به Thread**
3. استفاده از **Thread Pool**
4. استفاده از **Mutual Exclusion Object** با Threadهای همگام (Synchronous)
5. کار با Threadهای موازی با استفاده از **Semaphore**
6. محدود کردن تعداد **پردازنده‌ها و Threadها** در **Thread Pool**
7. جلوگیری از **Deadlock**
8. جلوگیری از **Race Condition**
9. درک **Static Constructorها و Methodها**
10. آشنایی با **Mutability (قابلیت تغییرپذیری)**، **Immutability (تغییرناپذیری)** و **Thread Safety**
11. **Synchronized Method Dependencies**
12. استفاده از کلاس **Interlocked** برای تغییر وضعیت‌های ساده
13. توصیه‌های عمومی 📝

---

### 🎯 پس از پایان این فصل شما توانایی‌های زیر را کسب خواهید کرد:

* درک و توضیح **چرخه حیات Thread**
* آشنایی با **Foreground Thread** و **Background Thread** و توانایی استفاده از آن‌ها
* مدیریت و کنترل سرعت اجرای Threadها (**Throttle**) و تعیین تعداد پردازنده‌های هم‌زمان با استفاده از **Thread Pool**
* درک اثر **Static Constructorها** و **Methodها** در ارتباط با **Multi-Threading** و **Concurrency**
* در نظر گرفتن تأثیر **Mutability** و **Immutability** بر **Thread Safety**
* درک علت بروز **Race Condition** و روش‌های جلوگیری از آن
* درک علت وقوع **Deadlock** و راه‌های پیشگیری از آن
* توانایی انجام تغییرات ساده در وضعیت‌ها با استفاده از کلاس **Interlocked**

---

### ⚡ پیش‌نیاز اجرای کدهای این فصل

برای اجرای کدهای این فصل به یک **.NET Framework Console Application** نیاز دارید.
مگر در مواقعی که به‌طور خاص ذکر شده باشد، تمام کدها درون کلاس **Program** قرار خواهند گرفت. 🖊️


### 🔄 درک **چرخه‌ی حیات Thread**

در زبان **C#**، هر **Thread** (رشته‌ی اجرایی) دارای یک **چرخه‌ی حیات** مشخص است.
این چرخه، مراحلی را نشان می‌دهد که یک Thread از زمان ایجاد شدن تا پایان کارش طی می‌کند.

چرخه‌ی حیات Thread به صورت زیر است: 🧩

<div align="center">
    
![Conventions-UsedThis-Book](../../assets/image/08/Table%208-1.jpeg) 
</div>
